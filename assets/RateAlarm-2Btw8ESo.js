import{I as V,q as C,J as E,r,g as k,o as _,w as a,x as l,c as R,F as S,G as T,z as B,h as I,b as d}from"./index-CLxOXX9K.js";const F={__name:"RateAlarm",setup(L,{expose:w}){const x=V("levels",[]),y=V("tag",{}),b=V("rate",null),u=C({}),m=C({});E(b,i=>{i===null||u.value===null?(u.value={instCode:y.value?.instCode,tagName:y.value?.tagName,alarmEnable:0,alarmType:3,alarmName:"变化率报警"},m.value={}):(u.value=b.value,m.value=JSON.parse(b.value.alarmRule))},{immediate:!0});const p=i=>{let e=u.value.alarmDesc;e||(e=""),u.value.alarmDesc=e+i};return w({getAlarmConfig:()=>{if(m.value.value!==void 0||u.value.alarmId!==void 0)return{...u.value,alarmRule:JSON.stringify(m.value)}}}),(i,e)=>{const v=r("el-switch"),n=r("el-form-item"),o=r("h-col"),U=r("el-option"),A=r("el-select"),N=r("el-input-number"),s=r("el-button"),g=r("el-space"),f=r("el-input"),$=r("el-row"),D=r("el-form");return _(),k(D,{ref:"formRef","label-width":"100px","label-suffix":"：",style:{width:"100%"}},{default:a(()=>[l($,{gutter:50},{default:a(()=>[l(o,{sm:24},{default:a(()=>[l(n,{label:"是否启用",prop:"alarmEnable"},{default:a(()=>[l(v,{modelValue:u.value.alarmEnable,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.alarmEnable=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:12},{default:a(()=>[l(n,{label:"报警等级",prop:"alarmLevel"},{default:a(()=>[l(A,{modelValue:u.value.alarmLevel,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.alarmLevel=t),clearable:""},{default:a(()=>[(_(!0),R(S,null,T(B(x),t=>(_(),k(U,{key:t.levelId,label:t.levelName,value:t.levelCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:12},{default:a(()=>[l(n,{"label-width":"0px"},{default:a(()=>[...e[16]||(e[16]=[I("math-field",{readonly:""}," 变化率=\\frac{\\left|当前值-前一个值\\right|}{\\left|当前时间-前一个时间\\right|}\\times100\\% ",-1)])]),_:1})]),_:1}),l(o,{sm:12},{default:a(()=>[l(n,{label:"变化率",prop:"value"},{default:a(()=>[l(N,{modelValue:m.value.value,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value.value=t),controls:!1,style:{width:"calc(100% - 20px)"},clearable:""},null,8,["modelValue"]),e[17]||(e[17]=d("  % ",-1))]),_:1})]),_:1}),l(o,{sm:12}),l(o,{sm:6},{default:a(()=>[l(n,{label:"包含边界",prop:"include"},{default:a(()=>[l(v,{modelValue:m.value.include,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value.include=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:6},{default:a(()=>[l(n,{label:"是否确认",prop:"needAck"},{default:a(()=>[l(v,{modelValue:u.value.needAck,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.needAck=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:6},{default:a(()=>[l(n,{label:"安全报警",prop:"alarmSafe"},{default:a(()=>[l(v,{modelValue:u.value.alarmSafe,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value.alarmSafe=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:24},{default:a(()=>[l(n,{label:"报警描述",prop:"alarmDesc"},{default:a(()=>[l(g,{direction:"vertical",fill:"",style:{width:"100%"}},{default:a(()=>[l(g,null,{default:a(()=>[l(s,{type:"primary",onClick:e[6]||(e[6]=t=>p("{报警时间}"))},{default:a(()=>[...e[18]||(e[18]=[d("报警时间",-1)])]),_:1}),l(s,{type:"primary",onClick:e[7]||(e[7]=t=>p("{报警等级}"))},{default:a(()=>[...e[19]||(e[19]=[d("报警等级",-1)])]),_:1}),l(s,{type:"primary",onClick:e[8]||(e[8]=t=>p("{报警类型}"))},{default:a(()=>[...e[20]||(e[20]=[d("报警类型",-1)])]),_:1}),l(s,{type:"primary",onClick:e[9]||(e[9]=t=>p("{报警值}"))},{default:a(()=>[...e[21]||(e[21]=[d("报警值",-1)])]),_:1}),l(s,{type:"primary",onClick:e[10]||(e[10]=t=>p("{对象名}"))},{default:a(()=>[...e[22]||(e[22]=[d("对象名",-1)])]),_:1}),l(s,{type:"primary",onClick:e[11]||(e[11]=t=>p("{监控点名}"))},{default:a(()=>[...e[23]||(e[23]=[d("监控点名",-1)])]),_:1})]),_:1}),l(f,{type:"textarea",modelValue:u.value.alarmDesc,"onUpdate:modelValue":e[12]||(e[12]=t=>u.value.alarmDesc=t),rows:3,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(o,{sm:8},{default:a(()=>[l(n,{label:"报警组",prop:"base"},{default:a(()=>[l(f,{modelValue:u.value.alarmGroup,"onUpdate:modelValue":e[13]||(e[13]=t=>u.value.alarmGroup=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:8},{default:a(()=>[l(n,{label:"报警区域",prop:"base"},{default:a(()=>[l(f,{modelValue:u.value.alarmArea,"onUpdate:modelValue":e[14]||(e[14]=t=>u.value.alarmArea=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{sm:8},{default:a(()=>[l(n,{label:"报警标签",prop:"base"},{default:a(()=>[l(f,{modelValue:u.value.alarmTag,"onUpdate:modelValue":e[15]||(e[15]=t=>u.value.alarmTag=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512)}}};export{F as default};
