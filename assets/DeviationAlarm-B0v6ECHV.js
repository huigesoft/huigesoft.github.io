import{I as V,q as w,J as $,r as d,g as U,o as y,w as a,x as e,c as E,F as G,G as I,z as L,b as r,t as R}from"./index-CLxOXX9K.js";const O={__name:"DeviationAlarm",setup(B,{expose:x}){const A=V("levels",[]),N=V("tpl",""),D=V("tag",{}),b=V("deviation",null),u=w({}),o=w({});$(b,s=>{s===null||u.value===null?(u.value={tplCode:N.value?.tplCode,tagName:D.value.tagName,alarmEnable:0,alarmType:2,alarmName:"偏差报警"},o.value={type:1}):(u.value=b.value,o.value=JSON.parse(b.value.alarmRule))},{immediate:!0});const p=s=>{let l=u.value.alarmDesc;l||(l=""),u.value.alarmDesc=l+s};return x({getAlarmConfig:()=>{if(o.value.value!==void 0||u.value.alarmId!==void 0)return{...u.value,alarmRule:JSON.stringify(o.value)}}}),(s,l)=>{const i=d("el-switch"),n=d("el-form-item"),m=d("h-col"),_=d("el-option"),g=d("el-select"),C=d("el-input-number"),v=d("el-button"),k=d("el-space"),f=d("el-input"),S=d("el-row"),T=d("el-form");return y(),U(T,{ref:"formRef","label-width":"100px","label-suffix":"：",style:{width:"100%"}},{default:a(()=>[e(S,{gutter:10},{default:a(()=>[e(m,{sm:24},{default:a(()=>[e(n,{label:"是否启用",prop:"alarmEnable"},{default:a(()=>[e(i,{modelValue:u.value.alarmEnable,"onUpdate:modelValue":l[0]||(l[0]=t=>u.value.alarmEnable=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:"报警等级",prop:"alarmLevel"},{default:a(()=>[e(g,{modelValue:u.value.alarmLevel,"onUpdate:modelValue":l[1]||(l[1]=t=>u.value.alarmLevel=t)},{default:a(()=>[(y(!0),E(G,null,I(L(A),t=>(y(),U(_,{key:t.levelId,label:t.levelName,value:t.levelCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:"方式",prop:"type"},{default:a(()=>[e(g,{modelValue:o.value.type,"onUpdate:modelValue":l[2]||(l[2]=t=>o.value.type=t)},{default:a(()=>[e(_,{label:"偏差值",value:1}),e(_,{label:"偏差百分比",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:o.value.type===1?"偏差值":"偏差百分比",prop:"dv"},{default:a(()=>[e(C,{modelValue:o.value.value,"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.value=t),controls:!1,style:{width:"calc(100% - 20px)"}},null,8,["modelValue"]),r(" "+R(o.value.type===1?"":" %"),1)]),_:1},8,["label"])]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:"基础值",prop:"base"},{default:a(()=>[e(C,{modelValue:o.value.base,"onUpdate:modelValue":l[4]||(l[4]=t=>o.value.base=t),controls:!1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:6},{default:a(()=>[e(n,{label:"包含边界",prop:"include"},{default:a(()=>[e(i,{modelValue:o.value.include,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.include=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:6},{default:a(()=>[e(n,{label:"是否确认",prop:"needAck"},{default:a(()=>[e(i,{modelValue:u.value.needAck,"onUpdate:modelValue":l[6]||(l[6]=t=>u.value.needAck=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:6},{default:a(()=>[e(n,{label:"安全报警",prop:"alarmSafe"},{default:a(()=>[e(i,{modelValue:u.value.alarmSafe,"onUpdate:modelValue":l[7]||(l[7]=t=>u.value.alarmSafe=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:24},{default:a(()=>[e(n,{label:"报警描述",prop:"alarmDesc"},{default:a(()=>[e(k,{direction:"vertical",fill:"",style:{width:"100%"}},{default:a(()=>[e(k,null,{default:a(()=>[e(v,{type:"primary",onClick:l[8]||(l[8]=t=>p("{报警时间}"))},{default:a(()=>[...l[18]||(l[18]=[r("报警时间",-1)])]),_:1}),e(v,{type:"primary",onClick:l[9]||(l[9]=t=>p("{报警等级}"))},{default:a(()=>[...l[19]||(l[19]=[r("报警等级",-1)])]),_:1}),e(v,{type:"primary",onClick:l[10]||(l[10]=t=>p("{报警类型}"))},{default:a(()=>[...l[20]||(l[20]=[r("报警类型",-1)])]),_:1}),e(v,{type:"primary",onClick:l[11]||(l[11]=t=>p("{报警值}"))},{default:a(()=>[...l[21]||(l[21]=[r("报警值",-1)])]),_:1}),e(v,{type:"primary",onClick:l[12]||(l[12]=t=>p("{对象名}"))},{default:a(()=>[...l[22]||(l[22]=[r("对象名",-1)])]),_:1}),e(v,{type:"primary",onClick:l[13]||(l[13]=t=>p("{监控点名}"))},{default:a(()=>[...l[23]||(l[23]=[r("监控点名",-1)])]),_:1})]),_:1}),e(f,{type:"textarea",modelValue:u.value.alarmDesc,"onUpdate:modelValue":l[14]||(l[14]=t=>u.value.alarmDesc=t),rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{sm:8},{default:a(()=>[e(n,{label:"报警组",prop:"alarmGroup"},{default:a(()=>[e(f,{modelValue:u.value.alarmGroup,"onUpdate:modelValue":l[15]||(l[15]=t=>u.value.alarmGroup=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:8},{default:a(()=>[e(n,{label:"报警区域",prop:"alarmArea"},{default:a(()=>[e(f,{modelValue:u.value.alarmArea,"onUpdate:modelValue":l[16]||(l[16]=t=>u.value.alarmArea=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:8},{default:a(()=>[e(n,{label:"报警标签",prop:"alarmTag"},{default:a(()=>[e(f,{modelValue:u.value.alarmTag,"onUpdate:modelValue":l[17]||(l[17]=t=>u.value.alarmTag=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512)}}};export{O as default};
