import{I as w,q as k,v as z,J as D,r as o,g as U,o as V,w as t,x as l,a as G,b as p,c as K,F as M,G as P,z as Q,t as W}from"./index-CLxOXX9K.js";const Z={__name:"ThresholdAlarm",setup(X,{expose:R}){const $=w("levels",[]),C=w("tag",{}),g=w("threshold",null),r=k({}),v=k([]),x=()=>{n.value={},v.value=[{type:"H5",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"H4",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"H3",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"H2",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"H1",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"L1",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"L2",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"L3",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"L4",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""},{type:"L5",value:null,include:0,enable:0,level:null,ack:null,safe:"",group:"",desc:"",tag:"",area:""}]},L=d=>{switch(d){case"H5":return"高5限";case"H4":return"高4限";case"H3":return"高3限";case"H2":return"高高限";case"H1":return"高限";case"L1":return"低限";case"L2":return"低低限";case"L3":return"低3限";case"L4":return"低4限";case"L5":return"低5限";default:return"未知"}},n=k({}),I=d=>{n.value=d},T=z(()=>L(n.value?.type)),i=d=>{if(n.value){let e=n.value.desc;e||(e=""),n.value.desc=e+d}},E=()=>{r.value={},x()},S=()=>{if(v.value.findIndex(d=>d.value!==null)>-1||r.value.alarmId!==void 0)return{...r.value,alarmRule:JSON.stringify(v.value)}};return D(g,d=>{if(n.value={},d===null||r.value===null)r.value={tplCode:C.value.tplCode,tagName:C.value.tagName,alarmEnable:0,alarmType:1,alarmName:"阈值报警"},x();else{r.value=g.value;const e=g.value?.alarmRule;v.value=JSON.parse(e)}},{immediate:!0}),R({clearConfig:E,getAlarmConfig:S}),(d,e)=>{const c=o("el-switch"),A=o("el-col"),H=o("el-row"),m=o("el-table-column"),B=o("el-option"),J=o("el-select"),N=o("el-input-number"),F=o("el-table"),s=o("el-button"),y=o("el-space"),f=o("el-input"),_=o("el-form-item"),b=o("h-col"),O=o("el-form"),j=o("el-tab-pane"),q=o("el-tabs");return V(),U(y,{direction:"vertical",fill:"",style:{width:"calc(100% - 10px)"}},{default:t(()=>[l(H,null,{default:t(()=>[l(A,{span:24},{default:t(()=>[e[12]||(e[12]=p(" 是否启用： ",-1)),l(c,{modelValue:r.value.alarmEnable,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.alarmEnable=a),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),l(F,{data:v.value,"highlight-current-row":"",stripe:"",style:{width:"100%"},"cell-class-name":"hk-cell","table-layout":"fixed","row-key":"type",border:"",onRowClick:I,"show-overflow-tooltip":""},{default:t(()=>[l(m,{prop:"enable",label:"启用","min-width":"70",align:"center"},{default:t(a=>[l(c,{modelValue:a.row.enable,"onUpdate:modelValue":u=>a.row.enable=u,"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"value",label:"等级","min-width":"120",align:"center"},{default:t(a=>[l(J,{modelValue:a.row.level,"onUpdate:modelValue":u=>a.row.level=u},{default:t(()=>[(V(!0),K(M,null,P(Q($),u=>(V(),U(B,{key:u.levelId,label:u.levelName,value:u.levelCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"type",label:"类型","min-width":"70",align:"center"},{default:t(a=>[p(W(L(a.row.type)),1)]),_:1}),l(m,{prop:"value",label:"阈值","min-width":"100",align:"center"},{default:t(a=>[l(N,{modelValue:a.row.value,"onUpdate:modelValue":u=>a.row.value=u,controls:!1,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"value",label:"死区","min-width":"100",align:"center"},{default:t(a=>[l(N,{modelValue:a.row.dead,"onUpdate:modelValue":u=>a.row.dead=u,controls:!1,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"include",label:"包含边界","min-width":"90",align:"center"},{default:t(a=>[l(c,{modelValue:a.row.include,"onUpdate:modelValue":u=>a.row.include=u,"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"include",label:"是否确认","min-width":"90",align:"center"},{default:t(a=>[l(c,{modelValue:a.row.ack,"onUpdate:modelValue":u=>a.row.ack=u,"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(m,{prop:"include",label:"安全报警","min-width":"90",align:"center"},{default:t(a=>[l(c,{modelValue:a.row.safe,"onUpdate:modelValue":u=>a.row.safe=u,"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),n.value.type?(V(),U(q,{key:0,modelValue:n.value.type,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.type=a)},{default:t(()=>[l(j,{label:T.value,name:n.value.type},{default:t(()=>[l(O,{"label-suffix":"：","label-width":"100px",style:{width:"100%"}},{default:t(()=>[l(H,{gutter:10},{default:t(()=>[l(b,{sm:24},{default:t(()=>[l(_,{label:"报警描述"},{default:t(()=>[l(y,{direction:"vertical",fill:"",style:{width:"100%"}},{default:t(()=>[l(y,null,{default:t(()=>[l(s,{type:"primary",onClick:e[1]||(e[1]=a=>i("{报警时间}"))},{default:t(()=>[...e[13]||(e[13]=[p("报警时间",-1)])]),_:1}),l(s,{type:"primary",onClick:e[2]||(e[2]=a=>i("{报警等级}"))},{default:t(()=>[...e[14]||(e[14]=[p("报警等级",-1)])]),_:1}),l(s,{type:"primary",onClick:e[3]||(e[3]=a=>i("{报警类型}"))},{default:t(()=>[...e[15]||(e[15]=[p("报警类型",-1)])]),_:1}),l(s,{type:"primary",onClick:e[4]||(e[4]=a=>i("{报警值}"))},{default:t(()=>[...e[16]||(e[16]=[p("报警值",-1)])]),_:1}),l(s,{type:"primary",onClick:e[5]||(e[5]=a=>i("{对象名}"))},{default:t(()=>[...e[17]||(e[17]=[p("对象名",-1)])]),_:1}),l(s,{type:"primary",onClick:e[6]||(e[6]=a=>i("{监控点名}"))},{default:t(()=>[...e[18]||(e[18]=[p("监控点名",-1)])]),_:1})]),_:1}),l(f,{type:"textarea",modelValue:n.value.desc,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.desc=a),rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(b,{sm:8},{default:t(()=>[l(_,{label:"报警组"},{default:t(()=>[l(f,{modelValue:n.value.group,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.group=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{sm:8},{default:t(()=>[l(_,{label:"报警区域"},{default:t(()=>[l(f,{modelValue:n.value.area,"onUpdate:modelValue":e[9]||(e[9]=a=>n.value.area=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{sm:8},{default:t(()=>[l(_,{label:"报警标签"},{default:t(()=>[l(f,{modelValue:n.value.tag,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.tag=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["label","name"])]),_:1},8,["modelValue"])):G("",!0)]),_:1})}}};export{Z as default};
