import{i as I,e as R,f as m,q as f,s as T,D as V,r as n,n as E,g as r,o as p,w as t,x as e,z as b,p as U,b as u,t as q,E as B}from"./index-CLxOXX9K.js";const L=m.service.system,M=_=>I({method:"post",url:L+"/sys/login-log/page",data:_}).catch(R),P={__name:"LoginLog",setup(_){const w=f(null),g=f(!1),d=f([]),l=T({loading:!1,open:!1,params:{total:0,page:1,size:m.pageInfo.pageSize,expressions:[{field:"username",query:"like",value:""}],sorts:[{field:"loginTime",direction:"DESC"}]}}),c=()=>{g.value=!0,M(l.params).then(s=>{g.value=!1,s.success?(d.value=s.value.records,l.params.total=s.value.total,l.params.page=s.value.current):(d.value=[],B({message:s?.exception||s?.msg||"操作失败！",type:"error"}))})};return V(()=>{c()}),(s,a)=>{const h=n("el-input"),y=n("el-form-item"),z=n("el-button"),x=n("el-form"),i=n("el-table-column"),v=n("el-tag"),k=n("el-table"),D=n("el-pagination"),C=n("h-list-layout"),S=E("loading");return p(),r(C,null,{header:t(()=>[e(x,{inline:!0},{default:t(()=>[e(y,{label:"用户名"},{default:t(()=>[e(h,{modelValue:l.params.expressions[0].value,"onUpdate:modelValue":a[0]||(a[0]=o=>l.params.expressions[0].value=o),style:{width:"150px"},clearable:""},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(z,{type:"primary",icon:"Search",round:"",onClick:c},{default:t(()=>[...a[3]||(a[3]=[u("查询",-1)])]),_:1})]),_:1})]),_:1})]),main:t(()=>[U((p(),r(k,{ref_key:"tableRef",ref:w,style:{width:"100%"},height:"100%",data:d.value,"highlight-current-row":"",stripe:"","show-overflow-tooltip":""},{default:t(()=>[e(i,{fixed:"left",type:"selection",width:"40"}),e(i,{prop:"username",label:"用户名","min-width":"120"}),e(i,{prop:"loginTime",label:"登录时间","min-width":"150"},{default:t(o=>[u(q(s.$defaultDateTimeFormat(o.row.loginTime)),1)]),_:1}),e(i,{prop:"loginIp",label:"登录IP","min-width":"120"}),e(i,{prop:"loginClient",label:"登录终端","min-width":"180"}),e(i,{prop:"loginResult",label:"登录结果","min-width":"80"},{default:t(o=>[o.row.loginResult===1?(p(),r(v,{key:0,type:"success"},{default:t(()=>[...a[4]||(a[4]=[u("成功",-1)])]),_:1})):(p(),r(v,{key:1,type:"danger"},{default:t(()=>[...a[5]||(a[5]=[u("失败",-1)])]),_:1}))]),_:1}),e(i,{prop:"loginRemark",label:"备注","min-width":"100"})]),_:1},8,["data"])),[[S,g.value]])]),footer:t(()=>[e(D,{"current-page":l.params.page,"onUpdate:currentPage":a[1]||(a[1]=o=>l.params.page=o),"page-size":l.params.size,"onUpdate:pageSize":a[2]||(a[2]=o=>l.params.size=o),total:l.params.total,layout:b(m).pageInfo.layout,"page-sizes":b(m).pageInfo.pageSizes,"pager-count":5,onChange:c,background:"",size:"small"},null,8,["current-page","page-size","total","layout","page-sizes"])]),_:1})}}};export{P as default};
