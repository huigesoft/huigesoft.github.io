import{I as b,q as w,J as D,r as o,g as x,o as y,w as a,x as e,c as E,F as S,G,z as I,b as s}from"./index-CLxOXX9K.js";const J={__name:"MatchingAlarm",setup(L,{expose:A}){const U=b("levels",[]),g=b("tag",{}),f=b("matching",null),u=w({}),r=w({});D(f,v=>{v===null||u.value===null?(u.value={tplCode:g.value.tplCode,tagName:g.value.tagName,alarmEnable:0,alarmType:4,alarmName:"匹配报警"},r.value={type:1}):(u.value=f.value,r.value=JSON.parse(f.value.alarmRule))},{immediate:!0});const d=v=>{let l=u.value.alarmDesc;l||(l=""),u.value.alarmDesc=l+v};return A({getAlarmConfig:()=>{if(r.value.value!==void 0||u.value.alarmId!==void 0)return{...u.value,alarmRule:JSON.stringify(r.value)}}}),(v,l)=>{const V=o("el-switch"),n=o("el-form-item"),m=o("h-col"),_=o("el-option"),C=o("el-select"),N=o("el-input-number"),p=o("el-button"),k=o("el-space"),i=o("el-input"),T=o("el-row"),$=o("el-form");return y(),x($,{ref:"formRef","label-width":"100px","label-suffix":"：",style:{width:"100%"}},{default:a(()=>[e(T,{gutter:50},{default:a(()=>[e(m,{sm:24},{default:a(()=>[e(n,{label:"是否启用",prop:"alarmEnable"},{default:a(()=>[e(V,{modelValue:u.value.alarmEnable,"onUpdate:modelValue":l[0]||(l[0]=t=>u.value.alarmEnable=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:"报警等级",prop:"alarmLevel"},{default:a(()=>[e(C,{modelValue:u.value.alarmLevel,"onUpdate:modelValue":l[1]||(l[1]=t=>u.value.alarmLevel=t)},{default:a(()=>[(y(!0),E(S,null,G(I(U),t=>(y(),x(_,{key:t.levelId,label:t.levelName,value:t.levelCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:"匹配方式",prop:"type"},{default:a(()=>[e(C,{modelValue:r.value.type,"onUpdate:modelValue":l[2]||(l[2]=t=>r.value.type=t)},{default:a(()=>[e(_,{label:"匹配",value:1}),e(_,{label:"不匹配",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:12},{default:a(()=>[e(n,{label:"匹配值",prop:"dv"},{default:a(()=>[e(N,{modelValue:r.value.value,"onUpdate:modelValue":l[3]||(l[3]=t=>r.value.value=t),controls:!1,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:6},{default:a(()=>[e(n,{label:"需要确认",prop:"needAck"},{default:a(()=>[e(V,{modelValue:u.value.needAck,"onUpdate:modelValue":l[4]||(l[4]=t=>u.value.needAck=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:6},{default:a(()=>[e(n,{label:"安全报警",prop:"alarmSafe"},{default:a(()=>[e(V,{modelValue:u.value.alarmSafe,"onUpdate:modelValue":l[5]||(l[5]=t=>u.value.alarmSafe=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:24},{default:a(()=>[e(n,{label:"报警描述",prop:"alarmDesc"},{default:a(()=>[e(k,{direction:"vertical",fill:"",style:{width:"100%"}},{default:a(()=>[e(k,null,{default:a(()=>[e(p,{type:"primary",onClick:l[6]||(l[6]=t=>d("{报警时间}"))},{default:a(()=>[...l[16]||(l[16]=[s("报警时间",-1)])]),_:1}),e(p,{type:"primary",onClick:l[7]||(l[7]=t=>d("{报警等级}"))},{default:a(()=>[...l[17]||(l[17]=[s("报警等级",-1)])]),_:1}),e(p,{type:"primary",onClick:l[8]||(l[8]=t=>d("{报警类型}"))},{default:a(()=>[...l[18]||(l[18]=[s("报警类型",-1)])]),_:1}),e(p,{type:"primary",onClick:l[9]||(l[9]=t=>d("{报警值}"))},{default:a(()=>[...l[19]||(l[19]=[s("报警值",-1)])]),_:1}),e(p,{type:"primary",onClick:l[10]||(l[10]=t=>d("{对象名}"))},{default:a(()=>[...l[20]||(l[20]=[s("对象名",-1)])]),_:1}),e(p,{type:"primary",onClick:l[11]||(l[11]=t=>d("{监控点名}"))},{default:a(()=>[...l[21]||(l[21]=[s("监控点名",-1)])]),_:1})]),_:1}),e(i,{type:"textarea",modelValue:u.value.alarmDesc,"onUpdate:modelValue":l[12]||(l[12]=t=>u.value.alarmDesc=t),rows:3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{sm:8},{default:a(()=>[e(n,{label:"报警组",prop:"alarmGroup"},{default:a(()=>[e(i,{modelValue:u.value.alarmGroup,"onUpdate:modelValue":l[13]||(l[13]=t=>u.value.alarmGroup=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:8},{default:a(()=>[e(n,{label:"报警区域",prop:"alarmArea"},{default:a(()=>[e(i,{modelValue:u.value.alarmArea,"onUpdate:modelValue":l[14]||(l[14]=t=>u.value.alarmArea=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{sm:8},{default:a(()=>[e(n,{label:"报警标签",prop:"alarmTag"},{default:a(()=>[e(i,{modelValue:u.value.alarmTag,"onUpdate:modelValue":l[15]||(l[15]=t=>u.value.alarmTag=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512)}}};export{J as default};
