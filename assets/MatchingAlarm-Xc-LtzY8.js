import{I as _,q as w,J as D,r as o,g as x,o as y,w as a,x as l,c as E,F as S,G,z as I,b as s}from"./index-CLxOXX9K.js";const J={__name:"MatchingAlarm",setup(L,{expose:A}){const U=_("levels",[]),g=_("tag",{}),f=_("matching",null),u=w({}),m=w({});D(f,v=>{v===null||u.value===null?(u.value={instCode:g.value.instCode,tagName:g.value.tagName,alarmEnable:0,alarmType:4,alarmName:"匹配报警"},m.value={type:1}):(u.value=f.value,m.value=JSON.parse(f.value.alarmRule))},{immediate:!0});const d=v=>{let e=u.value.alarmDesc;e||(e=""),u.value.alarmDesc=e+v};return A({getAlarmConfig:()=>{if(m.value.value!==void 0||u.value.alarmId!==void 0)return{...u.value,alarmRule:JSON.stringify(m.value)}}}),(v,e)=>{const b=o("el-switch"),n=o("el-form-item"),r=o("h-col"),V=o("el-option"),C=o("el-select"),N=o("el-input-number"),p=o("el-button"),k=o("el-space"),i=o("el-input"),T=o("el-row"),$=o("el-form");return y(),x($,{ref:"formRef","label-width":"100px","label-suffix":"：",style:{width:"100%"}},{default:a(()=>[l(T,{gutter:50},{default:a(()=>[l(r,{sm:24},{default:a(()=>[l(n,{label:"是否启用",prop:"alarmEnable"},{default:a(()=>[l(b,{modelValue:u.value.alarmEnable,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.alarmEnable=t),"inline-prompt":"","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:12},{default:a(()=>[l(n,{label:"报警等级",prop:"alarmLevel"},{default:a(()=>[l(C,{modelValue:u.value.alarmLevel,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.alarmLevel=t),clearable:""},{default:a(()=>[(y(!0),E(S,null,G(I(U),t=>(y(),x(V,{key:t.levelId,label:t.levelName,value:t.levelCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:12},{default:a(()=>[l(n,{label:"匹配方式",prop:"type"},{default:a(()=>[l(C,{modelValue:m.value.type,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value.type=t),clearable:""},{default:a(()=>[l(V,{label:"匹配",value:1}),l(V,{label:"不匹配",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:12},{default:a(()=>[l(n,{label:"匹配值",prop:"dv"},{default:a(()=>[l(N,{modelValue:m.value.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value.value=t),controls:!1,style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:6},{default:a(()=>[l(n,{label:"需要确认",prop:"needAck"},{default:a(()=>[l(b,{modelValue:u.value.needAck,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.needAck=t),"inline-prompt":"","active-value":1,"inactive-value":0,clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:6},{default:a(()=>[l(n,{label:"安全报警",prop:"alarmSafe"},{default:a(()=>[l(b,{modelValue:u.value.alarmSafe,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value.alarmSafe=t),"inline-prompt":"","active-value":1,"inactive-value":0,clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:24},{default:a(()=>[l(n,{label:"报警描述",prop:"alarmDesc"},{default:a(()=>[l(k,{direction:"vertical",fill:"",style:{width:"100%"}},{default:a(()=>[l(k,null,{default:a(()=>[l(p,{type:"primary",onClick:e[6]||(e[6]=t=>d("{报警时间}"))},{default:a(()=>[...e[16]||(e[16]=[s("报警时间",-1)])]),_:1}),l(p,{type:"primary",onClick:e[7]||(e[7]=t=>d("{报警等级}"))},{default:a(()=>[...e[17]||(e[17]=[s("报警等级",-1)])]),_:1}),l(p,{type:"primary",onClick:e[8]||(e[8]=t=>d("{报警类型}"))},{default:a(()=>[...e[18]||(e[18]=[s("报警类型",-1)])]),_:1}),l(p,{type:"primary",onClick:e[9]||(e[9]=t=>d("{报警值}"))},{default:a(()=>[...e[19]||(e[19]=[s("报警值",-1)])]),_:1}),l(p,{type:"primary",onClick:e[10]||(e[10]=t=>d("{对象名}"))},{default:a(()=>[...e[20]||(e[20]=[s("对象名",-1)])]),_:1}),l(p,{type:"primary",onClick:e[11]||(e[11]=t=>d("{监控点名}"))},{default:a(()=>[...e[21]||(e[21]=[s("监控点名",-1)])]),_:1})]),_:1}),l(i,{type:"textarea",modelValue:u.value.alarmDesc,"onUpdate:modelValue":e[12]||(e[12]=t=>u.value.alarmDesc=t),rows:3,clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(r,{sm:8},{default:a(()=>[l(n,{label:"报警组",prop:"alarmGroup"},{default:a(()=>[l(i,{modelValue:u.value.alarmGroup,"onUpdate:modelValue":e[13]||(e[13]=t=>u.value.alarmGroup=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:8},{default:a(()=>[l(n,{label:"报警区域",prop:"alarmArea"},{default:a(()=>[l(i,{modelValue:u.value.alarmArea,"onUpdate:modelValue":e[14]||(e[14]=t=>u.value.alarmArea=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{sm:8},{default:a(()=>[l(n,{label:"报警标签",prop:"alarmTag"},{default:a(()=>[l(i,{modelValue:u.value.alarmTag,"onUpdate:modelValue":e[15]||(e[15]=t=>u.value.alarmTag=t),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},512)}}};export{J as default};
